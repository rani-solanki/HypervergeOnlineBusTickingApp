{"ast":null,"code":"import _regeneratorRuntime from\"/home/rani/Documents/Red_bus_app/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/rani/Documents/Red_bus_app/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/home/rani/Documents/Red_bus_app/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/rani/Documents/Red_bus_app/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/rani/Documents/Red_bus_app/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{Fragment,useState}from'react';import'../../App.css';import{Link,Redirect,useHistory}from'react-router-dom';import{connect}from'react-redux';import setAlert from'../../action/aleart';import{searchbus}from'../../action/SearchBuses';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SearchBar=function SearchBar(_ref){var setAlert=_ref.setAlert,searchbus=_ref.searchbus,isAuthenticated=_ref.isAuthenticated;var _useState=useState({from:\"\",to:\"\",date:\" \"}),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var from=formData.from,to=formData.to,date=formData.date;var _onChange=function onChange(e){return setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},e.target.name,e.target.value)));};var history=useHistory();var _onSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var today,day,newData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();today=new Date().toISOString().slice(0,10);console.log(today,formData,\"hello\");if(date<today){alert(\"Invalid Date\");}else if(to===from){alert(\"Please select the valid Departure and Destination\");}else{// setting travel date in to location storage\nlocalStorage.setItem('travelDate',date);day=new Date(date);day=day.getDay();newData={to:to,from:from,date:day};searchbus(newData);history.push(\"/buses\");}case 4:case\"end\":return _context.stop();}}},_callee);}));return function onSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row pt-1 pb-1\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-12\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"text-center\",children:\"Search bar\"})})})}),/*#__PURE__*/_jsx(\"section\",{children:/*#__PURE__*/_jsxs(\"div\",{id:\"carouselExampleFade\",className:\"carousel slide carousel-fade\",\"data-ride\":\"carousel\",children:[/*#__PURE__*/_jsxs(\"a\",{className:\"carousel-control-prev\",href:\"#carouselExampleFade\",role:\"button\",\"data-slide\":\"prev\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"carousel-control-prev-icon\",\"aria-hidden\":\"true\"}),/*#__PURE__*/_jsx(\"span\",{className:\"sr-only\",children:\"Previous\"})]}),/*#__PURE__*/_jsxs(\"a\",{className:\"carousel-control-next\",href:\"#carouselExampleFade\",role:\"button\",\"data-slide\":\"next\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"carousel-control-next-icon\",\"aria-hidden\":\"true\"}),/*#__PURE__*/_jsx(\"span\",{className:\"sr-only\",children:\"Next\"})]})]})}),/*#__PURE__*/_jsx(\"section\",{className:\"search-sec\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"form\",{onSubmit:function onSubmit(e){return _onSubmit(e);},children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-3 col-md-3 col-sm-12 p-0\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control search-slt\",placeholder:\"Enter Pickup City\",name:\"from\",value:from,onChange:function onChange(e){return _onChange(e);}})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-3 col-md-3 col-sm-12 p-0\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control search-slt\",placeholder:\"Enter Drop City\",name:\"to\",value:to,onChange:function onChange(e){return _onChange(e);}})}),/*#__PURE__*/_jsx(\"input\",{type:\"Date\",className:\"form-control date-style\",placeholder:\"date\",name:\"date\",value:date,onChange:function onChange(e){return _onChange(e);}}),/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-3 col-md-3 col-sm-12 p-0\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-danger wrn-btn\",children:\"Search\"})})]})})})})})})]});};var mapStateToProps=function mapStateToProps(state){return{isAuthenticated:state.auth.isAuthenticated};};export default connect(mapStateToProps,{searchbus:searchbus})(SearchBar);","map":{"version":3,"sources":["/home/rani/Documents/Red_bus_app/Frontend/src/component/layout/SearchBar.js"],"names":["React","Fragment","useState","Link","Redirect","useHistory","connect","setAlert","searchbus","SearchBar","isAuthenticated","from","to","date","formData","setFormData","onChange","e","target","name","value","history","onSubmit","preventDefault","today","Date","toISOString","slice","console","log","alert","localStorage","setItem","day","getDay","newData","push","mapStateToProps","state","auth"],"mappings":"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","sourcesContent":["import React, { Fragment, useState } from 'react';\nimport '../../App.css'\nimport { Link, Redirect, useHistory } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport setAlert from '../../action/aleart';\nimport PropTypes from 'prop-types'\nimport { searchbus } from '../../action/SearchBuses';\n\nconst SearchBar = ({ setAlert, searchbus, isAuthenticated }) => {\n    const [formData, setFormData] = useState({\n        from: \"\",\n        to: \"\",\n        date: \" \"\n    });\n    const { from, to, date } = formData;\n    const onChange = e => setFormData({ ...formData, [e.target.name]: e.target.value });\n    let history = useHistory();\n    const onSubmit = async (e) => {\n        e.preventDefault();\n        let today = new Date().toISOString().slice(0, 10);\n        console.log(today,formData,\"hello\");\n        if (date < today) {\n            alert(\"Invalid Date\");\n        } else if (to === from) {\n            alert(\"Please select the valid Departure and Destination\");\n        } else {\n            // setting travel date in to location storage\n            localStorage.setItem('travelDate', date)\n            let day = new Date(date);\n            day = day.getDay();\n\n            const newData = {\n                to,\n                from,\n                date: day,\n            };\n            \n            searchbus(newData)\n            history.push(\"/buses\")\n        }\n    }\n    return (\n        <Fragment>\n            <div className=\"container\">\n                <div className=\"row pt-1 pb-1\">\n                    <div className=\"col-lg-12\">\n                        <h1 className=\"text-center\">Search bar</h1>\n                    </div>\n                </div>\n            </div>\n            <section>\n                <div id=\"carouselExampleFade\" className=\"carousel slide carousel-fade\" data-ride=\"carousel\">\n                    <a className=\"carousel-control-prev\" href=\"#carouselExampleFade\" role=\"button\" data-slide=\"prev\">\n                        <span className=\"carousel-control-prev-icon\" aria-hidden=\"true\"></span>\n                        <span className=\"sr-only\">Previous</span>\n                    </a>\n                    <a className=\"carousel-control-next\" href=\"#carouselExampleFade\" role=\"button\" data-slide=\"next\">\n                        <span className=\"carousel-control-next-icon\" aria-hidden=\"true\"></span>\n                        <span className=\"sr-only\">Next</span>\n                    </a>\n                </div>\n            </section>\n            <section className=\"search-sec\">\n                <div className=\"container\">\n                    <form onSubmit={e => onSubmit(e)}>\n                        <div className=\"row\">\n                            <div className=\"col-lg-12\">\n                                <div className=\"row\">\n                                    <div className=\"col-lg-3 col-md-3 col-sm-12 p-0\">\n                                        <input type=\"text\" className=\"form-control search-slt\" placeholder=\"Enter Pickup City\" name='from' value={from}\n                                            onChange={e => onChange(e)} />\n                                    </div>\n                                    <div className=\"col-lg-3 col-md-3 col-sm-12 p-0\">\n                                        <input type=\"text\" className=\"form-control search-slt\" placeholder=\"Enter Drop City\" name='to' value={to}\n                                            onChange={e => onChange(e)}/>\n                                    </div>\n                                    <input type=\"Date\" className=\"form-control date-style\" placeholder=\"date\" name=\"date\" value={date}\n                                        onChange={e => onChange(e)}/>\n                                    <div className=\"col-lg-3 col-md-3 col-sm-12 p-0\">\n                                        <button type=\"submit\" className=\"btn btn-danger wrn-btn\">Search</button>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </form>\n                </div>\n            </section>\n        </Fragment>\n    )\n};\n\nSearchBar.propTypes = {\n    setAlert: PropTypes.func.isRequired,\n    register: PropTypes.func.isRequired,\n    isAuthenticated: PropTypes.func.isRequired\n}\nconst mapStateToProps = state => ({\n    isAuthenticated: state.auth.isAuthenticated\n});\n\nexport default connect(mapStateToProps, { searchbus })(SearchBar)"]},"metadata":{},"sourceType":"module"}