{"ast":null,"code":"import _regeneratorRuntime from\"/home/rani/Documents/Red_bus_app/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/rani/Documents/Red_bus_app/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{ADD_BUS,ADD_BUS_FAILED}from'./type';import axios from'axios';import setAlert from'./aleart';var addBus=function addBus(_ref){var busName=_ref.busName,agency=_ref.agency,vehicleNo=_ref.vehicleNo,seats=_ref.seats,busType=_ref.busType,seatCategory=_ref.seatCategory,busStaff=_ref.busStaff,policy=_ref.policy,secdule=_ref.secdule,image=_ref.image,from=_ref.from,to=_ref.to,arrivalTime=_ref.arrivalTime,departureTime=_ref.departureTime;return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var config,days,day,start,End,body,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:config={headers:{'Content-Type':'application/json'}};days=[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"];for(day=0;day<secdule.length;day++){secdule[day]=days.indexOf(secdule[day]);}start=from.trim().split(',');End=to.trim().split(',');from={\"city\":start[0],\"state\":start[1]};to={\"city\":End[0],\"state\":End[1]};from={\"city\":start[0],\"state\":start[1]};to={\"city\":End[0],\"state\":End[1]};body=JSON.stringify({busName:busName,agency:agency,vehicleNo:vehicleNo,seats:seats,busType:busType,seatCategory:seatCategory,busStaff:busStaff,policy:policy,secdule:secdule,image:image,from:from,to:to,arrivalTime:arrivalTime,departureTime:departureTime});_context.prev=10;_context.next=13;return axios.post('/api/admins/admin/Addbus',body,config);case 13:res=_context.sent;dispatch({type:ADD_BUS,payload:res.data});alert('bus has added succefully','success');_context.next=23;break;case 18:_context.prev=18;_context.t0=_context[\"catch\"](10);console.log(_context.t0);alert('there was an error while adding the bus','danger');dispatch({type:ADD_BUS_FAILED});case 23:case\"end\":return _context.stop();}}},_callee,null,[[10,18]]);}));return function(_x){return _ref2.apply(this,arguments);};}();};export default addBus;","map":{"version":3,"sources":["/home/rani/Documents/Red_bus_app/Frontend/src/action/bus.js"],"names":["ADD_BUS","ADD_BUS_FAILED","axios","setAlert","addBus","busName","agency","vehicleNo","seats","busType","seatCategory","busStaff","policy","secdule","image","from","to","arrivalTime","departureTime","dispatch","config","headers","days","day","length","indexOf","start","trim","split","End","body","JSON","stringify","post","res","type","payload","data","alert","console","log"],"mappings":"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","sourcesContent":["import { ADD_BUS, ADD_BUS_FAILED } from './type';\nimport axios from 'axios';\nimport setAlert from './aleart';\n\nconst addBus = ({\n    busName,\n    agency,\n    vehicleNo,\n    seats,\n    busType,\n    seatCategory,\n    busStaff,\n    policy,\n    secdule,\n    image,\n    from,\n    to,\n    arrivalTime,\n    departureTime\n}) => async dispatch => {\n    const config = {\n        headers: {\n            'Content-Type': 'application/json'\n        }\n    };\n\n    const days = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\n    for (let day = 0; day < secdule.length; day++) {\n        secdule[day] = days.indexOf(secdule[day]);\n    }\n    const start = from.trim().split(',')\n    const End = to.trim().split(',')\n\n    from = { \"city\": start[0], \"state\": start[1] }\n    to = { \"city\": End[0], \"state\": End[1] }\n    from = { \"city\": start[0], \"state\": start[1] }\n    to = { \"city\": End[0], \"state\": End[1] }\n\n    const body = JSON.stringify({\n        busName,\n        agency,\n        vehicleNo,\n        seats,\n        busType,\n        seatCategory,\n        busStaff,\n        policy,\n        secdule,\n        image,\n        from,\n        to,\n        arrivalTime,\n        departureTime\n    });\n\n    try {\n        const res = await axios.post('/api/admins/admin/Addbus', body, config);\n        dispatch({\n            type: ADD_BUS,\n            payload: res.data\n        });\n        alert('bus has added succefully', 'success');\n    } catch (err) {\n        console.log(err);\n        alert('there was an error while adding the bus', 'danger');\n        dispatch({\n            type: ADD_BUS_FAILED\n        });\n    }\n    };\n\nexport default addBus"]},"metadata":{},"sourceType":"module"}